<div class="show-container">
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-4">
        <p id="asset-details-title">ASSET DETAILS</p>
        <% if @project.pictures.present? %>
          <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
              <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active" id="slide-color"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="1" id="slide-color"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="2" id="slide-color"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="3" id="slide-color"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="4" id="slide-color"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="5" id="slide-color"></li>
            </ol>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <%= cl_image_tag @project.pictures[0].photo, alt: "Picture", class: "d-block w-100", height: 15, width: 20, crop: :lfill%>
              </div>
              <%  @project.pictures.each do |pic| %>
                <div class="carousel-item">
                  <%= cl_image_tag pic.photo, alt: "Picture", class: "d-block w-100", height: 300, width: 400, crop: :lfill%>
                </div>
              <% end %>
            </div>
              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
          </div>
        <% end %>
        <div class="card-search_search">
          <div class="project-details">
            <h6><%= @project.name.upcase %></h6>
            <!-- <div id="edit-btn">
              <i class="far fa-edit"></i>
            </div>
            <div id="delete-btn">
              <i class="far fa-trash-alt"></i>
            </div> -->
            <div class="pictos-details">
              <div class="pictos-details-align">
                <%= image_tag ("address.png") %>
                <p><%=@project.street_and_nr%></p>
              </div>
              <div class="pictos-details-align">
                <%= image_tag ("category.png") %>
                <p><%=@project.category%></p>
              </div>
              <div class="pictos-details-align">
                <%= image_tag ("surface.png") %>
                <p><%=@project.surface%> m2</p>
              </div>
              <div class="pictos-details-align">
                <%= image_tag ("bedroom.png") %>
                <p><%=@project.nr_of_bedrooms%></p>
              </div>
              <div class="pictos-details-align">
                <%= image_tag ("bathroom.png") %>
                <p><%=@project.nr_of_bathrooms%></p>
              </div>
              <div class="pictos-details-align">
                <%= image_tag ("car.png") %>
                <p><%=@project.garage%></p>
              </div>
              <div class="pictos-details-align">
                <%= image_tag ("terrace.png") %>
                <p><%=@project.terrace%></p>
              </div>
              <!-- <div class="pictos-details-align">
                <%#= image_tag ("estimate.png") %>
                <p><%= @detailed_estimate %>€</p>
              </div> -->
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <p id="estimate-details-title">ESTIMATE DETAILS</p>
        <div class="card-details-show">

          <div class="result-estimate">
            <h4><%= @simple_estimate %>€</h4>
          </div>
          <div class="card-details-estimate">
            <p><strong>ASSET VALUE</strong></p>
            <div class= "card-details-flex">
              <div class="details-title">
                <p>Market Value: </p>
                <p>Registration Fees: </p>
                <p>Total price with registration fee: </p>
              </div>
              <div class="details-value">
                <p><%= @simple_estimate %> € </p>
                <p><%= (@simple_estimate * 0.15).to_i  %>€</p>
                <p><%= ((@simple_estimate * 0.15) + @simple_estimate).to_i %> €</p>

              </div>
            </div>
            <p><strong>RENOVATION COSTS</strong></p>
            <div class= "card-details-flex">
              <div class="details-title">
                <p>Heating: </p>
                <p>Electricity: </p>
                <p>Sanitation: </p>
                <p>Kitchen: </p>
                <p>Total Renovation Cost: </p>
              </div>
              <div class="details-value">
                <% if @project.heating %>
                    <p><%= @renovation_details.heating_price %> €</p>
                  <% else %>
                    <p>0 €</p>
                  <% end %>

                  <% if @project.electricity %>
                    <p><%= @renovation_details.electricity_price %> €</p>
                  <% else %>
                    <p>0 €</p>
                  <% end %>

                  <% if @project.sanitation %>
                    <p><%= @renovation_details.sanitation_price %> €</p>
                  <% else %>
                    <p>0 €</p>
                  <% end %>

                  <% if @project.kitchen %>
                    <p><%= @renovation_details.kitchen_price %> €</p>
                  <% else %>
                    <p>0 €</p>
                  <% end %>
                <p><%= @renovation_details.total_price  %> €</p>

              </div>
            </div>
          </div>
<!--

          <p>Asset Value: <%= @simple_estimate %> € </p>
          <p>Registration Fees: <%#= (@simple_estimate * 0.15).to_i  %>€</p>
           <p>Total price with registration fee: <%#= ((@simple_estimate * 0.15) + @simple_estimate).to_i %> €</p>
          <p>Renovation to be done</p>
          <p><strong><%#= "Heating Cost: #{@renovation_details.heating_price} €" if @project.heating %></strong> </p>
          <p><strong><%#= "Kitchen Cost: 7000€" if @project.kitchen %></strong></p>
          <p><strong><%#= "Sanitation Cost: #{@renovation_details.sanitation_price} " if @project.sanitation %> € </strong> </p>
          <p><strong><%#= "Electricity Cost: #{@renovation_details.electricity_price} " if @project.electricity %> €</strong> </p>
          <p>Total Renovation Cost: <%= @renovation_details.total_price  %> €</p>
          <p> <strong> </strong></p> -->


              <%#= link_to 'Download your estimate on PDF format', project_path(@project, format: :pdf) %>

        </div>
      </div>

      <div class="col-12 col-md-4">
        <p id="estimate-details-title">LOCATION</p>
        <div class="map-show">
          <div
            id="map"
            style="width: 40%;
            height: 21rem !important;"
            data-markers="<%= @markers.to_json %>"
            data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>
        </div>
      </div>

    </div>

  </div>
  <%= javascript_pack_tag "chart" %>
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-4">
        <p id="estimate-details-title">10Y PRICE EVOLUTION</p>
        <div class="card-details-show">
          <%= line_chart [["2010", 242393], ["2011", 258216], ["2012", 265773], ["2013", 278286], ["2014", 267549], ["2015", 259995],["2016", 295558], ["2017", 312703],["2018", 330121], ["2019", 348508]], xtitle: "Time", ytitle: "Market price", min: 200000, max: 500000, width: "250px", height: "250px" %>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <p id="estimate-details-title">INTEREST RATE</p>
        <div class="card-details-show">
          <%= line_chart [["2010", 3,71], ["2011", 3,95], ["2012", 4,25], ["2013", 2,2], ["2014", 2,54], ["2015", 0,81],["2016", 0,93], ["2017", 0,65],["2018", 0,66], ["2019", 0,73]], xtitle: "Time", ytitle: "Interest rate", min: 0, max: 5, width: "250px", height: "250px" %>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <p id="estimate-details-title">LOAN CALCULATOR</p>
        <div class="card-details-show">
          <%= simple_form_for :loan_calculation, url: new_loan_project_path(@project), remote: true do |f| %>
            <%= f.input :rate, collection: [0.01,0.02,0.03,0.04,0.05] %>
            <%= f.input :years, collection: [5,10,15,20,25] %>
            <%= f.submit "Calculate Loan", class: "btn-green"  %>
          <% end %>
          <div id="loan-calculation"></div>
        </div>
      </div>

    </div>

  </div>
</div>
